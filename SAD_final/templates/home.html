<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width", initial-scale=1.0>
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Home Menu</title>
		<script>console.log("Helrld");</script>
	</head>

	<body>
		<div class='content'>
			<div class='container' style="background-color:rgb(23, 109, 116);">
				<button onclick="document.getElementById('email').style.display='block'" class="button transparent">發送Email</button>
			</div>
			<div class='container' style="background-color:rgb(192, 95, 28);">
				<button onclick="document.getElementById('scholar').style.display='block'" class="button transparent">發送獎學金</button>
			</div>
			<div class='container' style="background-color:rgb(21, 129, 41);">
				<a href="../admin">更動資料庫</a>
			</div>
		</div>

		<div id="email" class="modal">
		    <div class="modal-content" style="overflow-y: scroll; max-height:85%; margin-top: 50px; margin-bottom:50px;">
		    	<div class="container">
			        <p style="font-size: 24px;" id="emailTxt">確定發送Email?</p>
			        <button onclick="API_Email();this.style.display='none'" class="button" style="color:gray;">確定</button>
		    		<button onclick="document.getElementById('email').style.display='none'" class="button" style="color:gray;">取消</button>
		    	</div>
		    </div>
		</div>

		<div id="scholar" class="modal">
		    <div class="modal-content" style="overflow-y: scroll; max-height:85%; margin-top: 50px; margin-bottom:50px;">
		    	<div class="container">
			        <p style="font-size: 24px;" id="scholarTxt">確定發送獎學金?</p>
			        <button onclick="API_Scholar();this.style.display='none'" class="button" style="color:gray;">確定</button>
		    		<button onclick="document.getElementById('scholar').style.display='none'" class="button" style="color:gray;">取消</button>
		    	</div>
		    </div>
		</div>
	</body>

	<script type="text/javascript">
		function API_Email() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var obj = JSON.parse(this.responseText);

					var out = "";
					out += "<p style='font-size: 24px'>已發送給</p>";
					for(var k in obj) {
						out += obj[k]['name'] + " " + obj[k]['class'] + "<br>";
					}

					document.getElementById("emailTxt").innerHTML = out;
			    }
			};
			xhttp.open("GET", "http://127.0.0.1:8000/FengCramSchool/api/sendEmail/", true);
			xhttp.send();
		}

		function API_Scholar() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var obj = JSON.parse(this.responseText);

					var out = "";
					out += "<p style='font-size: 24px'>已發送給</p>";
					for(var k in obj) {
						out += obj[k]['name'] + " " + obj[k]['amount'] + "元<br>";
					}

					document.getElementById("scholarTxt").innerHTML = out;
			    }
			};
			xhttp.open("GET", "http://127.0.0.1:8000/FengCramSchool/api/issueScholar/", true);
			xhttp.send();
		}
	</script>

	<style>
		html, body {
		    height: 100%;
		}

		html {
		    display: table;
		    margin: auto;
		}

		body {
		    display: table-cell;
		    vertical-align: middle;
			margin: 0;
			font-family: "Microsoft JhengHei", sans-serif;
		}

		.button {
		    background-color: Transparent;
		    background-repeat:no-repeat;
		    border: none;
		    cursor:pointer;
		    overflow: hidden;
		    outline:none;
		    font-family: "Microsoft JhengHei", sans-serif;
		    font-size: 16px;
		    color: rgb(255, 255, 255);
		}

		.button:hover {
			color: rgb(238, 108, 126);
		}

		.content {
			max-width: 500px;
			margin: auto;
		}

		.content a:link, a:visited {
		    text-decoration: none;
		    color: rgb(255, 255, 255);
		}

		.content a:hover, a:active {
		    color: rgb(238, 108, 126);
		    text-decoration: none;
		}

		.container {
		    margin: auto;
		    width: auto;
		    padding: 1.5em 1.5em;
		    align-content: center;
		    border-radius: 1em;
		    display: inline-block;
		}

		.modal{
			z-index:3;
			display:none;
			padding-top:100px;
			position:fixed;
			left:0;
			top:0;
			width:100%;
			height:100%;
			overflow:auto;
			background-color:rgb(0,0,0);
			background-color:rgba(0,0,0,0.4);
		}

		.modal-content{
			margin:auto;
			background-color:#fff;
			position:relative;
			padding:0;
			outline:0;
			width:600px;
			text-align:center;
			height: 50%;
  			overflow-y: auto;
		}
	</style>
</html>